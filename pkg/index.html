<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Shamir's Secret Sharing - JS Test</title>
</head>

<body>
    <h1>Check the Console for Output</h1>
    <script type="module">
        // Usage Example:
        import init, { split_key, reconstruct_key } from "./adi_shamir_sharing.js";

        async function run() {
            // Initialize the WebAssembly module. This loads the .wasm file.
            await init();

            // Example secret as a hexadecimal string (this must be less than the prime modulus).
            const evmSecret = "4c0883a69102937d6231471b5dbb6204fe512961708279e6ae5d47ee21b7e1cd";
            // Split the secret into 4 shares.
            const evmShares = split_key(evmSecret);
            console.log("Generated shares:", evmShares);

            // Reconstruct the secret from the shares.
            const evmReconstructed = reconstruct_key(evmShares);
            console.log("Reconstructed evmSecret:", evmReconstructed, "evmSecret matches:", evmReconstructed === evmSecret);

            const solSecret = "3f9d86dc77a19a6f7a1ee2dc19f7528409929a1c8ee0f0b9807c3af87bf98e3d";

            // Split the secret into 4 shares.
            const solShares = split_key(solSecret);
            console.log("Generated shares:", solShares);

            const solReconstructed = reconstruct_key(solShares);
            console.log("Reconstructed solSecret:", solReconstructed, "solSecret matches:", solReconstructed === solSecret);

        }

        run().catch(console.error);
    </script>
</body>

</html>